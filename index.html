<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Quiz Interactivo</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f4f9; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .quiz-container { background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); max-width: 700px; width: 95%; position: relative; }
        .header-row { display: flex; justify-content: space-between; align-items: start; border-bottom: 2px solid #007bff; padding-bottom: 0.5rem; margin-bottom: 1.5rem; }
        h1 { color: #333; font-size: 1.4rem; margin: 0; }
        .shuffle-btn { background-color: #6c757d; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; font-size: 0.9rem; transition: 0.2s; }
        .shuffle-btn:hover { background-color: #5a6268; }
        .score-board { font-size: 0.9rem; color: #555; margin-top: 5px; }
        .question { font-size: 1.2rem; margin-bottom: 1.2rem; font-weight: 600; color: #2c3e50; line-height: 1.4; }
        .options { display: flex; flex-direction: column; gap: 10px; }
        .option-btn { padding: 12px 15px; border: 2px solid #e0e0e0; border-radius: 8px; background: white; cursor: pointer; text-align: left; transition: all 0.2s; font-size: 1rem; position: relative; }
        .option-btn:hover:not(:disabled) { background-color: #f0f8ff; border-color: #007bff; }
        .option-btn.correct { background-color: #d4edda; border-color: #28a745; color: #155724; }
        .option-btn.wrong { background-color: #f8d7da; border-color: #dc3545; color: #721c24; }
        .option-btn.should-have-been { border: 2px dashed #28a745; background-color: #e9f7ef; }
        .option-btn:disabled { cursor: default; opacity: 1; } 
        .feedback { margin-top: 20px; padding: 15px; border-radius: 8px; display: none; font-size: 1rem; line-height: 1.5; }
        .feedback.show { display: block; animation: fadeIn 0.3s; }
        .feedback-correct { background-color: #e9f7ef; border-left: 5px solid #28a745; }
        .feedback-wrong { background-color: #fce8e6; border-left: 5px solid #dc3545; }
        .feedback-info { background-color: #e2e6ea; border-left: 5px solid #6c757d; }
        .controls { margin-top: 30px; display: flex; justify-content: space-between; gap: 10px; padding-top: 15px; border-top: 1px solid #eee; }
        .nav-btn { padding: 10px 25px; border-radius: 5px; cursor: pointer; font-size: 1rem; border: none; font-weight: bold; transition: 0.2s; }
        #prev-btn { background-color: #e2e6ea; color: #333; }
        #prev-btn:hover:not(:disabled) { background-color: #dbe0e5; }
        #prev-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        #next-btn { background-color: #007bff; color: white; } 
        #next-btn:hover { background-color: #0056b3; }
        #next-btn.back-to-results { background-color: #6c757d; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="quiz-container" id="quiz-ui">
    <div class="header-row">
        <div>
            <h1 id="quiz-title-display">Mi Quiz Interactivo</h1>
            <div class="score-board">
                Pregunta <span id="current-q">1</span> de <span id="total-q">0</span> 
                | Puntos actuales: <span id="score-val" style="font-weight: bold; color: #007bff;">0</span>
            </div>
        </div>
        <button class="shuffle-btn" onclick="restartQuizManual()">üîÑ Reiniciar</button>
    </div>
    
    <div id="question-area">
        <div class="question" id="question-text">Cargando...</div>
        <div class="options" id="options-container"></div>
        <div class="feedback" id="feedback-text"></div>
    </div>

    <div class="controls">
        <button id="prev-btn" class="nav-btn" onclick="prevQuestion()">Anterior</button>
        <div style="flex-grow: 1;"></div> 
        <button id="next-btn" class="nav-btn" onclick="nextQuestion()">Siguiente</button>
    </div>
</div>

<div class="quiz-container" id="results-ui" style="display: none; text-align: center;">
    <h1 style="font-size: 2rem; color: #007bff; margin-bottom: 20px;">Quiz Finalizado</h1>
    <div id="final-score-display" style="font-size: 1.5rem; margin: 20px 0;"></div>
    <p id="final-msg-display" style="color: #666; font-size: 1.1rem;"></p>
    
    <div style="margin-top: 30px; display: flex; gap: 10px; justify-content: center;">
        <button class="nav-btn" style="background-color: #28a745; color: white;" onclick="enterReviewMode()">üîç Revisar Respuestas</button>
        <button class="nav-btn" style="background-color: #007bff; color: white;" onclick="restartQuizManual()">üîÑ Volver a Jugar</button>
    </div>
</div>

<script>
    const quizData = {
    "questions": [
        {
            "question": "¬øQui√©n es considerado el padre de la tecnolog√≠a fotovoltaica en la era contempor√°nea por observar este efecto por primera vez?",
            "answerOptions": [
                {
                    "text": "Albert Einstein",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Alexandre-Edmond Becquerel.",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "Thomas Edison.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": "¬øQu√© funci√≥n principal realiza un inversor en una instalaci√≥n fotovoltaica?",
            "answerOptions": [
                {
                    "text": "Almacenar la energ√≠a excedente para la noche.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Medir la radiaci√≥n solar global.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Transformar la corriente continua de los paneles en corriente alterna (CA).",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                }
            ]
        },
        {
            "question": "¬øcu√°l es el rango de eficiencia actual de los paneles monocristalinos?",
            "answerOptions": [
                {
                    "text": "Entre el 7% y el 13%.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Alrededor del 16%.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Entre el 21% y el 23%.",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                }
            ]
        },
        {
            "question": "¬øQu√© es el \"Efecto Clipping\" en el contexto del dimensionamiento de inversores?",
            "answerOptions": [
                {
                    "text": "Es el corte de producci√≥n que realiza el inversor cuando la potencia solar supera su capacidad nominal.",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "Es la p√©rdida de energ√≠a por suciedad en los paneles.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Es el aumento de voltaje debido a las bajas temperaturas.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": "¬øQu√© tecnolog√≠a de almacenamiento se perfila como la soluci√≥n ideal para el almacenamiento estacional y a largo plazo?",
            "answerOptions": [
                {
                    "text": "Bater√≠as de Litio (BESS).",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Sales Fundidas.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Hidr√≥geno Verde (H2).",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                }
            ]
        },
        {
            "question": "¬øQu√© significa LCOE y cu√°l es su tendencia actual seg√∫n el trabajo?",
            "answerOptions": [
                {
                    "text": "Coste de Oportunidad Energ√©tica; ha subido debido a la inflaci√≥n.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Coste Nivelado de la Energ√≠a; ha ca√≠do un 90% desde 2010.",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "L√≠mite de Carga Operativa El√©ctrica; se mantiene estable.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": "En relaci√≥n con el mantenimiento, ¬øqu√© factor ambiental disminuye el rendimiento de los paneles solares?",
            "answerOptions": [
                {
                    "text": "El fr√≠o intenso.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "El calor excesivo (temperaturas muy por encima de 25¬∞C).",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "El viento moderado.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": "¬øQu√© es la Agrovoltaica?",
            "answerOptions": [
                {
                    "text": "El uso de biocombustibles para limpiar paneles.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "La sustituci√≥n de campos de cultivo por plantas solares exclusivamente.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "La combinaci√≥n de cultivos o pastoreo con paneles elevados o verticales en el mismo terreno.",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                }
            ]
        },
        {
            "question": "¬øCu√°nto tiempo se estima que tarda un panel moderno en generar la energ√≠a que cost√≥ fabricarlo (EPBT)?",
            "answerOptions": [
                {
                    "text": "Menos de 1 a√±o.",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "Entre 5 y 7 a√±os.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Aproximadamente 10 a√±os.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": "¬øQu√© diferencia principal existe entre la Potencia Pico (Wp) y la Potencia Nominal (Wn)?",
            "answerOptions": [
                {
                    "text": "No hay diferencia, son sin√≥nimos.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "La Wp es la del inversor y la Wn es la de los paneles.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "La Wp es la suma de potencia de los m√≥dulos en condiciones est√°ndar y la Wn es la potencia m√°xima de salida del inversor.",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                }
            ]
        },
        {
            "question": "¬øCu√°l es el incremento de producci√≥n estimado de un seguidor solar de un eje frente a una estructura fija?",
            "answerOptions": [
                {
                    "text": "Entre un 5% y un 10%.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Entre un 25% y un 30%.",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "Hasta un 60%.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": "¬øQu√© regi√≥n de Espa√±a destaca por tener una media anual superior a las 3.000 horas de sol?",
            "answerOptions": [
                {
                    "text": "Galicia.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Pa√≠s Vasco.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Andaluc√≠a.",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                }
            ]
        },
        {
            "question": "En una c√©lula fotovoltaica, ¬øqu√© elemento se utiliza para dopar el silicio y crear la Zona N (negativa)?",
            "answerOptions": [
                {
                    "text": "Boro.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "F√≥sforo.",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "Litio.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": "¬øQu√© es la \"Paridad de Red\" en el √°mbito del autoconsumo?",
            "answerOptions": [
                {
                    "text": "Cuando el coste de producir tu propia energ√≠a es igual o menor al precio de comprarla de la red.",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "Cuando la instalaci√≥n est√° desconectada f√≠sicamente de la red el√©ctrica.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Cuando se produce exactamente la misma cantidad de energ√≠a que se consume.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": "¬øC√≥mo se clasifican los paneles fotovoltaicos al final de su vida √∫til en Europa?",
            "answerOptions": [
                {
                    "text": "Como residuos urbanos comunes.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Como residuos inertes de construcci√≥n.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Como Residuos de Aparatos El√©ctricos y Electr√≥nicos (RAEE).",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                }
            ]
        },
        {
            "question": "¬øCu√°l de estos tipos de radiaci√≥n NO nos interesa para una instalaci√≥n de energ√≠a solar t√©rmica?",
            "answerOptions": [
                {
                    "text": "Radiaci√≥n visible",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Radiaci√≥n ultravioleta",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Radiaci√≥n Gamma.",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                }
            ]
        },
        {
            "question": "Por lo general, ¬øqu√© mezcla se utiliza como fluido caloportador?",
            "answerOptions": [
                {
                    "text": "Agua diluida en alcohol.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Gas refrigerante.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Agua y anticongelante.",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                }
            ]
        },
        {
            "question": "¬øQu√© es la energ√≠a solar t√©rmica?",
            "answerOptions": [
                {
                    "text": "La energ√≠a que produce electricidad directamente a partir de paneles fotovoltaicos.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "La energ√≠a generada por la combusti√≥n de materiales f√≥siles.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "La energ√≠a que llega del sol en forma de calor y se aprovecha para instalaciones t√©rmicas.",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                }
            ]
        },
        {
            "question": "¬øQu√© funci√≥n cumplen los captadores solares en una instalaci√≥n solar t√©rmica?",
            "answerOptions": [
                {
                    "text": "Transformar la radiaci√≥n solar en energ√≠a el√©ctrica.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Absorber la radiaci√≥n y transferir el calor al fluido caloportador.",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "Refrescar el fluido caloportador antes de enviarlo al dep√≥sito acumulador.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": "¬øCu√°l de las siguientes NO es una aplicaci√≥n de la energ√≠a solar t√©rmica?",
            "answerOptions": [
                {
                    "text": "Agua caliente sanitaria (ACS).",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Calefacci√≥n por suelo radiante.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Producci√≥n directa de energ√≠a fotovoltaica.",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                }
            ]
        },
        {
            "question": "¬øCu√°l es un rango t√≠pico de potencia para turbinas offshore instaladas recientemente?",
            "answerOptions": [
                {
                    "text": "0,1 ‚Äì 0,5 MW",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "3 ‚Äì 4 MW",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "8 ‚Äì 14 MW",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                }
            ]
        },
        {
            "question": " ¬øQu√© t√©cnica es m√°s adecuada para almacenar energ√≠a para uso estacional a gran escala?",
            "answerOptions": [
                {
                    "text": "Bater√≠as de Li-ion a peque√±a escala.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Hidr√≥geno o bombeo hidr√°ulico (PHS)",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "Regulaci√≥n de frecuencia local.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": "¬øQu√© dimensiones necesita un parque a gran escala por cada megavatio instalado?",
            "answerOptions": [
                {
                    "text": "Entre 30 y 60 metros de distancia entre turbinas instaladas.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Entre 30 y 60 hect√°reas por cada megavatio instalado",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "Entre 3 y 6 campos de f√∫tbol por cada megavatio instalado.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": "¬øCu√°les son los tres principales componentes de un aerogenerador?",
            "answerOptions": [
                {
                    "text": "La g√≥ndola, control electr√≥nico y eje de alta velocidad.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "El buje, veleta y anem√≥metro.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "El rotor, la multiplicadora y el generador",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                }
            ]
        },
        {
            "question": "¬øQu√© fuerza de la naturaleza aprovecha la energ√≠a e√≥lica?",
            "answerOptions": [
                {
                    "text": "Calor",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Luz",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Viento",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                }
            ]
        },
        {
            "question": "¬øCu√°l de estas es un sistema de fijaci√≥n de las plataformas Offshore de cimentaci√≥n fija?",
            "answerOptions": [
                {
                    "text": "Por camisas de sujeci√≥n.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Por monopilotes",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "Por boyas de flotaci√≥n.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": "¬øQu√© porcentaje de inversi√≥n respecto del total representa la instalaci√≥n de la turbina de un aerogenerador?",
            "answerOptions": [
                {
                    "text": "0,5%",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "10-15%",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "65-75%",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                }
            ]
        },
        {
            "question": "Los costes asociados al mantenimiento correctivo (no programado) de un aerogenerador al cabo de 15-20 a√±os:",
            "answerOptions": [
                {
                    "text": "Aumentan aproximadamente al doble",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "Disminuyen a la mitad.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Se mantienen iguales.",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": "Que factores que afectan directamente al rendimiento de un aerogenerador:",
            "answerOptions": [
                {
                    "text": "Altura de la torre",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "Zona horaria",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Suelo",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": "Qu√© Comunidad Aut√≥noma de Espa√±a es la que m√°s energ√≠a e√≥lica produce?",
            "answerOptions": [
                {
                    "text": "Madrid",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Castilla la Mancha",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Castilla Le√≥n",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                }
            ]
        },
        {
            "question": "Tipos de obst√°culos que dejan pasar partes del viento:",
            "answerOptions": [
                {
                    "text": "Porosos",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "No porosos",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Absolutos",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": " Cu√°l de los siguientes es un impacto ambiental de la e√≥lica:",
            "answerOptions": [
                {
                    "text": "Fauna",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "Aviones",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Tr√°fico",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": "La energ√≠a nuclear se obtiene principalmente mediante",
            "answerOptions": [
                {
                    "text": "La quema de combustibles",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "La fuerza del viento",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Fisi√≥n o fusi√≥n de n√∫cleos at√≥micos",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                }
            ]
        },
        {
            "question": " La fisi√≥n nuclear consiste en:",
            "answerOptions": [
                {
                    "text": "Unir dos n√∫cleos",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Dividir un n√∫cleo pesado",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "Crear electricidad directamente",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": "¬øQu√© elemento se usa com√∫nmente como combustible nuclear?",
            "answerOptions": [
                {
                    "text": "Hierro",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Oro",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Uranio",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                }
            ]
        },
        {
            "question": "¬øQu√© se genera en una central nuclear para mover la turbina?",
            "answerOptions": [
                {
                    "text": "Energ√≠a",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Luz",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Vapor",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                }
            ]
        },
        {
            "question": "¬øQu√© tipo de energ√≠a emite muy poco CO‚ÇÇ durante su funcionamiento?",
            "answerOptions": [
                {
                    "text": "Biomasa",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Gas natural",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Energ√≠a nuclear",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                }
            ]
        },
        {
            "question": "¬øQu√© es una ‚Äúbarra de combustible‚Äù?",
            "answerOptions": [
                {
                    "text": "Un conjunto de pastillas de uranio dentro de una vaina met√°lica",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "Una herramienta para medir radiaci√≥n",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Un sistema de refrigeraci√≥n",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": "Las centrales nucleares funcionan principalmente como:",
            "answerOptions": [
                {
                    "text": "Energ√≠a intermitente",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Carga base (funcionan continuamente)",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "Energ√≠a de emergencia",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": "¬øQu√© sistema se utiliza para controlar la reacci√≥n dentro del reactor?",
            "answerOptions": [
                {
                    "text": "Ventanas de seguridad",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Barras de control",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "Paneles solares",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": "¬øQu√© tipo de residuo generan las centrales nucleares?",
            "answerOptions": [
                {
                    "text": "Radiactivo",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "Org√°nico",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Ambos",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": "¬øCu√°l es uno de los principales beneficios de la energ√≠a nuclear?",
            "answerOptions": [
                {
                    "text": "Depende del clima",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Produce mucha electricidad con poco combustible",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "No necesita mantenimiento",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": "¬øQu√© ocurre con el combustible gastado despu√©s de usarlo?",
            "answerOptions": [
                {
                    "text": "Se mezcla con agua",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Se deposita en piscinas para enfriarse",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "Se evapora",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": " ¬øLa energ√≠a nuclear es una energ√≠a‚Ä¶?",
            "answerOptions": [
                {
                    "text": "No renovable",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "Limpia",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Barata",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": "¬øQu√© tipo de reactor genera vapor directamente en su interior?",
            "answerOptions": [
                {
                    "text": "Reactor BWR",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "Reactor t√©rmico",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Reactor PWR",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": "¬øCu√°l de estos es un riesgo asociado a la energ√≠a nuclear?",
            "answerOptions": [
                {
                    "text": "Lluvia",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Accidentes y residuos radiactivos",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "Emisiones de CO‚ÇÇ",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": "La energ√≠a nuclear ayuda a combatir el cambio clim√°tico porque:",
            "answerOptions": [
                {
                    "text": "No necesita combustible",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Apenas emite gases de efecto invernadero",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "No usa agua",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": "¬øCu√°l es el recurso principal de la energ√≠a hidroel√©ctrica?",
            "answerOptions": [
                {
                    "text": "El viento",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "El agua",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "La radiaci√≥n solar",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": "2. ¬øQu√© tipo de energ√≠a posee el agua almacenada en un embalse?",
            "answerOptions": [
                {
                    "text": "T√©rmica",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Potencial",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "Qu√≠mica",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": "3. La turbina que se utiliza en ca√≠das muy altas y caudales peque√±os es:",
            "answerOptions": [
                {
                    "text": "Kaplan",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Francis",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Pelton",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                }
            ]
        },
        {
            "question": "4. Las centrales de pasada se caracterizan por",
            "answerOptions": [
                {
                    "text": "Almacenar grandes vol√∫menes de aguaA) Almacenar grandes vol√∫menes de agua",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Depender directamente del caudal natural del r√≠o",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "Tener la mayor potencia instalada del sistema",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": "Las centrales hidroel√©ctricas de bombeo sirven principalmente para:",
            "answerOptions": [
                {
                    "text": "Generar electricidad de forma constante",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Almacenar energ√≠a bombeando agua hacia un embalse superior",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "Reducir la temperatura del agua",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": "¬øQu√© turbina es ideal para ca√≠das bajas y alto caudal?",
            "answerOptions": [
                {
                    "text": "Pelton",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Kaplan",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "Microflow",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": "La eficiencia t√≠pica de una central hidroel√©ctrica se sit√∫a entre:",
            "answerOptions": [
                {
                    "text": "30‚Äì40%",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "50‚Äì60%",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "80‚Äì90%",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                }
            ]
        },
        {
            "question": "El factor de capacidad de una central de gran embalse suele ser",
            "answerOptions": [
                {
                    "text": "5‚Äì10%",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "30‚Äì60%",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "70‚Äì90%",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": "En √©pocas h√∫medas, la generaci√≥n hidroel√©ctrica:",
            "answerOptions": [
                {
                    "text": "Disminuye",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Se detiene",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Aumenta",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                }
            ]
        },
        {
            "question": "Las centrales hidroel√©ctricas son una de las fuentes m√°s √∫tiles para la red debido a",
            "answerOptions": [
                {
                    "text": "Su imposibilidad de almacenar agua",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Su respuesta r√°pida ante la demanda",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "Su baja eficiencia",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": "Un impacto negativo frecuente de las presas es",
            "answerOptions": [
                {
                    "text": "Aumento de la biodiversidad",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Mejora de la pesca",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Sedimentaci√≥n y p√©rdida de ecosistemas",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                }
            ]
        },
        {
            "question": "Un beneficio social de las centrales hidroel√©ctricas es",
            "answerOptions": [
                {
                    "text": "Desplazamiento de comunidades",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Generaci√≥n de empleo y desarrollo local",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "P√©rdida de actividades econ√≥micas",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": "La central hidroel√©ctrica m√°s grande de Espa√±a mencionada en el documento es",
            "answerOptions": [
                {
                    "text": "Aldead√°vila",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Cortes-La Muela",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                },
                {
                    "text": "Mequinenza",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                }
            ]
        },
        {
            "question": "La central internacional estudiada, Antonio Jos√© de Sucre, est√° ubicada en",
            "answerOptions": [
                {
                    "text": "Colombia",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "M√©xico",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Venezuela",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                }
            ]
        },
        {
            "question": "Una ventaja clave de la energ√≠a hidroel√©ctrica es que",
            "answerOptions": [
                {
                    "text": "Es muy contaminante",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "No es renovable",
                    "isCorrect": false,
                    "rationale": "Incorrecto."
                },
                {
                    "text": "Permite regular la producci√≥n seg√∫n la demanda",
                    "isCorrect": true,
                    "rationale": "¬°Correcto!"
                }
            ]
        }
    ]
};
    const config = {
    "shuffle": true
};

    let currentQuestionIndex = 0;
    let userAnswers = []; 
    let isReviewMode = false;

    const quizUI = document.getElementById('quiz-ui');
    const resultsUI = document.getElementById('results-ui');
    const questionText = document.getElementById('question-text');
    const optionsContainer = document.getElementById('options-container');
    const feedbackText = document.getElementById('feedback-text');
    const nextBtn = document.getElementById('next-btn');
    const prevBtn = document.getElementById('prev-btn');
    const currentQSpan = document.getElementById('current-q');
    const scoreValSpan = document.getElementById('score-val');

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    function randomizeData() {
        if (config.shuffle) {
            shuffleArray(quizData.questions);
            quizData.questions.forEach(question => {
                shuffleArray(question.answerOptions);
            });
        }
    }

    function initQuiz() {
        userAnswers = new Array(quizData.questions.length).fill(null);
        document.getElementById('total-q').innerText = quizData.questions.length;
        isReviewMode = false;
        currentQuestionIndex = 0;
        updateScoreUI();
        quizUI.style.display = 'block';
        resultsUI.style.display = 'none';
        loadQuestion();
    }

    function restartQuizManual() {
        if(!confirm("¬øReiniciar el quiz?")) return;
        if(config.shuffle) randomizeData();
        initQuiz();
    }

    function updateScoreUI() {
        let currentScore = 0;
        userAnswers.forEach((ansIndex, qIndex) => {
            if (ansIndex !== null) {
                if (quizData.questions[qIndex].answerOptions[ansIndex].isCorrect) {
                    currentScore++;
                }
            }
        });
        scoreValSpan.innerText = currentScore;
        return currentScore;
    }

    function loadQuestion() {
        const currentQ = quizData.questions[currentQuestionIndex];
        currentQSpan.innerText = currentQuestionIndex + 1;
        prevBtn.disabled = (currentQuestionIndex === 0);
        
        if (currentQuestionIndex === quizData.questions.length - 1) {
            if (isReviewMode) {
                nextBtn.innerText = 'Volver a Resultados';
                nextBtn.classList.add('back-to-results');
            } else {
                nextBtn.innerText = 'Finalizar y Ver Nota';
                nextBtn.classList.remove('back-to-results');
            }
        } else {
            nextBtn.innerText = 'Siguiente';
            nextBtn.classList.remove('back-to-results');
        }

        questionText.innerText = currentQ.question;
        optionsContainer.innerHTML = '';
        feedbackText.className = 'feedback';
        feedbackText.innerHTML = '';
        feedbackText.style.display = 'none';

        currentQ.answerOptions.forEach((opt, index) => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.innerText = opt.text;
            const userIdx = userAnswers[currentQuestionIndex];
            
            if (isReviewMode) {
                btn.disabled = true;
                if (userIdx !== null) {
                    if (index === userIdx) {
                        if (opt.isCorrect) btn.classList.add('correct');
                        else btn.classList.add('wrong');
                    } else if (opt.isCorrect && !currentQ.answerOptions[userIdx].isCorrect) {
                        btn.classList.add('should-have-been');
                    }
                } else {
                    if (opt.isCorrect) btn.classList.add('should-have-been');
                }
            } else {
                if (userIdx !== null) {
                    btn.disabled = true;
                    if (index === userIdx) {
                        if (opt.isCorrect) btn.classList.add('correct');
                        else btn.classList.add('wrong');
                    } else if (opt.isCorrect && !currentQ.answerOptions[userIdx].isCorrect) {
                        btn.classList.add('should-have-been');
                    }
                } else {
                    btn.onclick = () => checkAnswer(opt, index);
                }
            }
            optionsContainer.appendChild(btn);
        });

        const savedIdx = userAnswers[currentQuestionIndex];
        if (savedIdx !== null) {
            const savedOpt = currentQ.answerOptions[savedIdx];
            showFeedbackText(savedOpt, currentQ);
        } else if (isReviewMode) {
            const correctOpt = currentQ.answerOptions.find(o => o.isCorrect);
            feedbackText.style.display = 'block';
            feedbackText.classList.add('show', 'feedback-info');
            feedbackText.innerHTML = `<strong>No contestada.</strong><br>La respuesta correcta era: ${correctOpt.text}<br><em>${correctOpt.rationale}</em>`;
        }
    }

    function checkAnswer(selectedOption, index) {
        userAnswers[currentQuestionIndex] = index;
        updateScoreUI();
        const allBtns = optionsContainer.querySelectorAll('.option-btn');
        const currentQ = quizData.questions[currentQuestionIndex];

        allBtns.forEach((btn, i) => {
            btn.disabled = true;
            const opt = currentQ.answerOptions[i];
            if (i === index) {
                if (opt.isCorrect) btn.classList.add('correct');
                else btn.classList.add('wrong');
            } else {
                if (opt.isCorrect && !selectedOption.isCorrect) {
                    btn.classList.add('should-have-been');
                }
            }
        });
        showFeedbackText(selectedOption, currentQ);
    }

    function showFeedbackText(selectedOpt, currentQ) {
        feedbackText.style.display = 'block';
        feedbackText.classList.add('show');
        if (selectedOpt.isCorrect) {
            feedbackText.classList.add('feedback-correct');
            feedbackText.innerHTML = `<strong>¬°Correcto!</strong><br>${selectedOpt.rationale}`;
        } else {
            const correctOpt = currentQ.answerOptions.find(o => o.isCorrect);
            feedbackText.classList.add('feedback-wrong');
            feedbackText.innerHTML = `<strong>Incorrecto.</strong><br>${selectedOpt.rationale}<br><br><strong>Respuesta correcta:</strong> ${correctOpt.text}`;
        }
    }

    function prevQuestion() {
        if (currentQuestionIndex > 0) {
            currentQuestionIndex--;
            loadQuestion();
        }
    }

    function nextQuestion() {
        if (currentQuestionIndex < quizData.questions.length - 1) {
            currentQuestionIndex++;
            loadQuestion();
        } else {
            if (isReviewMode) {
                showResultsScreen(); 
            } else {
                finishQuiz(); 
            }
        }
    }

    function finishQuiz() {
        const finalScore = updateScoreUI();
        const total = quizData.questions.length;
        const percentage = (finalScore / total) * 100;
        let msg = '';
        if (percentage === 100) msg = '¬°Perfecto!';
        else if (percentage >= 50) msg = 'Has aprobado.';
        else msg = 'Sigue practicando.';

        const unanswered = userAnswers.filter(u => u === null).length;
        if(unanswered > 0) msg += `<br><small>(Dejaste ${unanswered} preguntas sin contestar)</small>`;

        document.getElementById('final-score-display').innerHTML = `Has acertado <strong>${finalScore}</strong> de <strong>${total}</strong>`;
        document.getElementById('final-msg-display').innerHTML = msg;
        showResultsScreen();
    }

    function showResultsScreen() {
        quizUI.style.display = 'none';
        resultsUI.style.display = 'block';
    }

    function enterReviewMode() {
        isReviewMode = true;
        currentQuestionIndex = 0;
        resultsUI.style.display = 'none';
        quizUI.style.display = 'block';
        loadQuestion();
    }

    randomizeData();
    initQuiz();
</script>
</body>
</html>
